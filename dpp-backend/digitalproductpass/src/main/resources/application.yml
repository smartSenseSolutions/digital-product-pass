#################################################################################
# Tractus-X - Digital Product Passport Application
#
# Copyright (c) 2022, 2024 BMW AG, Henkel AG & Co. KGaA
# Copyright (c) 2023, 2024 CGI Deutschland B.V. & Co. KG
# Copyright (c) 2022, 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
# either express or implied. See the
# License for the specific language govern in permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
#################################################################################


spring:
  name: 'Catena-X Digital Product Passport Consumer Backend'
  main:
    allow-bean-definition-overriding: true
  devtools:
    add-properties: false
  jackson:
    serialization:
      indent_output: true

logging:
  level:
    root: INFO
    utils: INFO

configuration:
  maxRetries: 5

  keycloak:
    realm: CX-Central
    resource: Cl13-CX-Battery
    tokenUri: 'https://centralidp.cx.the-sense.io/auth/realms/CX-Central/protocol/openid-connect/token'
    userInfoUri: 'https://centralidp.cx.the-sense.io/auth/realms/CX-Central/protocol/openid-connect/userinfo'

  edc:
    endpoint: 'https://edc-controlplane.smartsense.the-sense.io'
    readiness: '/api/check/readiness'
    management: '/management/v2'
    catalog: '/catalog/request'
    negotiation: '/contractnegotiations'
    transfer: '/transferprocesses'
    receiverEndpoint: 'https://b26c-203-129-213-107.ngrok-free.app/endpoint'
    delay:  100 # -- Negotiation status Delay in milliseconds in between async requests [<= 500]
    transferType: "application/octet-stream"
    timeout:
      exchange: 90

  security:
    authorization:
      bpnAuth: false
      roleAuth: false
    startUpChecks:
      bpnCheck: false
      edcCheck: false

  irs:
    enabled: true
    endpoint: "http://localhost:8080"
    paths:
      job: "irs/jobs"
    tree:
      fileName: "treeDataModel"
      indent: true
    callbackUrl: "http://localhost:8080/api/irs"

  dtr:
    assetPropType: 'asset:prop:type'
    assetType: 'data.core.digitalTwinRegistry'
    endpointInterface: 'SUBMODEL-3.0'
    dspEndpointKey: 'dspEndpoint'
    semanticIdTypeKey: 'Submodel'
    decentralApis:
      search: "/lookup/shells"
      digitalTwin: "/shell-descriptors"
      subModel: "/submodel-descriptors"
    timeouts:
      search: 30
      negotiation: 30
      dtrRequestProcess: 60
      transfer: 30
      digitalTwin: 30
    temporaryStorage:
      enabled: true
      lifetime: 12 # -- Hours

  discovery:
    endpoint: "https://discoveryfinder.cx.the-sense.io/api/v1.0/administration/connectors/discovery/search"
    bpn:
      key: "manufacturerPartId"
      searchPath: "/search"
      timeout: 30000
    edc:
      key: "edc"
      timeout: 30000


  process:
    store: true
    dir: 'process'
    indent: true
    signKey: 'c55e3f35200f6afedbce37cefdaf40eadd15c92814edfdbc4d6ab0eacdcdd56dbcd5a2a34ca4b675084d33f9f479d7d79347795148aaf4443e1b47ab96b27e72'

  passport:
    searchIdSchema: "CX:<manufacturerPartId>:<partInstanceId>"
    dataTransfer:
      encrypt: true
      indent: true
      dir: "data/transfer"
    aspects:
      - "urn:bamm:io.catenax.generic.digital_product_passport:1.0.0#DigitalProductPassport"
      - "urn:bamm:io.catenax.battery.battery_pass:3.0.1#BatteryPass"

  vault:
    type: 'local'
    file: 'vault.token.yml'
    pathSep: "."
    prettyPrint: true
    indent: 2
    defaultValue: '<Add secret value here>'
    attributes:
      - "appId"
      - "client.id"
      - "client.secret"
      - "edc.apiKey"
      - "edc.participantId"

server:
  error:
    include-message: ALWAYS
    include-binding-errors: ALWAYS
    include-stacktrace: ON_PARAM
    include-exception: false
  port: 8880
  tomcat:
    max-connections: 10000
